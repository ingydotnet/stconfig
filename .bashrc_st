[ -e ~/.stconfig-before ] && source ~/.stconfig-before
source ~/.commonrc 
source ~/.aliases-common

sx() { screen -x "$1/"; }
# username completion for sx
_sx_comp() {
    local screen_dir=/var/run/screen
    local cur
    cur="${COMP_WORDS[COMP_CWORD]}"
    COMPREPLY=( $(perl -e 'while (<$ARGV[0]/S-$ARGV[1]*>) { m|$ARGV[0]/S-([^/]*)|; print "$1\n" }' $screen_dir $cur ) )
    return 0
}
complete -F _sx_comp sx

# sb completion, returns a list of all local and remote branches as one list
_sb_comp() {
    local current=~/src/st/current/.git
    local cur
    cur="${COMP_WORDS[COMP_CWORD]}"
    COMPREPLY=( $(git --git-dir $current branch -a | perl -e 'while (<STDIN>){ s{^..(?:[^/]+/)?}{}g; print if (/^$ARGV[0]/); }' $cur) )
    return 0
}
complete -F _sb_comp sb
